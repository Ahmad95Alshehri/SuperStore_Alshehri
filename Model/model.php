<?php// Get all Category$category_choice = "all";$segment_choice = "all";$state_choice = "all";$sales_total = 0;$profit_total = 0;$profit_ratio = 0;function all_categories(){    global $db;    $category_choice = filter_input(INPUT_GET, 'category_choice');    $queryAllCategories = "SELECT DISTINCT category FROM orders";    $statement = $db->prepare($queryAllCategories);    $statement->execute();    $categories = $statement->fetchAll(PDO::FETCH_ASSOC);    $statement->closeCursor();    return $categories;}// Get all segmentsfunction all_segments(){    global $db;    $segment_choice = filter_input(INPUT_GET, 'category_choice');    $queryAllSegments = 'SELECT DISTINCT segment FROM orders order BY segment ASC';    $statement1 = $db->prepare($queryAllSegments);    $statement1->execute();    $segments = $statement1->fetchAll();    $statement1->closeCursor();    return $segments;}// get all states function all_states(){    global $db;    $state_choice = filter_input(INPUT_GET, 'states_choice');    $queryAllStates = 'SELECT DISTINCT state FROM orders ORDER BY State ASC';    $statement3 = $db->prepare($queryAllStates);    $statement3->execute();    $states = $statement3->fetchAll();    $statement3->closeCursor();    return $states;}//All Querries for tablefunction all_queries($category_choice, $segment_choice, $states_choice){    global $db;    $condition = "1=1";    if ($category_choice != "all") $condition .= " AND Category = '$category_choice'";    if ($segment_choice != "all") $condition .= " AND Segment = '$segment_choice'";    if ($states_choice != "all") $condition .= " AND State = '$states_choice'";    $queryTable = "SELECT * FROM orders  WHERE $condition order BY state";    $statement = $db->prepare($queryTable);    //$statement->bindValue(':category', "=".$category_choice);    //$statement->bindValue(':segment', "=".$segment_choice);    //$statement->bindValue(':state', "=".$states_choice);    $statement->execute();    $Querries_table = $statement->fetchAll();    $statement->closeCursor();    return $Querries_table;}// sales total query and calculation function salesTotal($category_choice, $segment_choice, $states_choice){    $sql = "SELECT *,SUM(sales) AS sales_sum FROM orders";    $cost = exec_sql($sql,$category_choice, $segment_choice, $states_choice)["sales_sum"];    return $cost;}// profit total function profitTotal($category_choice, $segment_choice, $states_choice){    $sql = "SELECT *,SUM(profit) AS profits_sum FROM orders";    $cost = exec_sql($sql,$category_choice, $segment_choice, $states_choice)["profits_sum"];    return $cost;}function exec_sql($sql,$category_choice, $segment_choice, $states_choice){    global $db;    $condition = "1=1";    if ($category_choice != "all") $condition .= " AND Category = '$category_choice'";    if ($segment_choice != "all") $condition .= " AND Segment = '$segment_choice'";    if ($states_choice != "all") $condition .= " AND State = '$states_choice'";    $salesTotal = "$sql WHERE $condition";    $statement = $db->prepare($salesTotal);    //$statement->bindParam(':condtion', $condition);    $statement->execute();    $data = $statement->fetch(PDO::FETCH_ASSOC);    $statement->closeCursor();    return $data;}//$profits_array = array();//	foreach($profts as $profit)//	{//		array_push($profits_array, $profit['sales']);//	}//	$profit_totalcount = array_count_values($profits_array);//////	$profit_limit = count($profit_totalcount);?>